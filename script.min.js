let taskForm=document.querySelector("form"),taskInput=document.querySelector("#task-input"),deleteAllBtn=document.querySelector(".delete-all"),todoList=[];null!==(todoList=JSON.parse(localStorage.getItem("todoList")))&&displayTodoList();let doneList=[];function displayList(t,e){for(let o=0;o<t.length;o++)document.querySelector(`.${e}`).innerHTML+=`<div class="line" data-id="${t[o].id}"><div class="container"><div class="checkbox"><i class="fa-solid fa-check"></i></div><p class="label">${t[o].task}</p><i class="fa-solid fa-xmark delete"></i></div></div>`;changeTaskStatus(),deleteTask(),deleteAllDoneTasks()}function displayTodoList(){let t;displayList(todoList,"todo__list")}function displayDoneList(){let t;displayList(doneList,"done__list")}function createTaskId(){taskId="tdl"+Date.now()}function checkListLocalStorage(t,e,o,s){null!==t?saveListLocalStorage(t,e,o,s):saveListLocalStorage(t=[],e,o,s)}function saveListLocalStorage(t,e,o,s){t.push({id:e,task:o}),localStorage.setItem(`${s}`,JSON.stringify(t))}function changeTaskStatus(){let t=document.querySelectorAll(".checkbox");for(let e=0;e<t.length;e++)t[e].onclick=function(){let o=t[e].closest("[data-id]").dataset.id,s=todoList.findIndex(t=>t.id===o);-1!==s?moveTaskFromTodo(o,s):(s=doneList.findIndex(t=>t.id===o),moveTaskFromDone(o,s)),changeTaskStatus()}}function moveTaskFromTodo(t,e){let o=todoList[e].id,s=todoList[e].task,i="doneList";checkListLocalStorage(doneList,o,s,i),null!==doneList&&(document.querySelector(".done__list").innerHTML=""),doneList=JSON.parse(localStorage.getItem("doneList")),displayDoneList(),removeItemLocalStorage(t,todoList,i="todoList","todo__list",displayTodoList)}function moveTaskFromDone(t,e){let o=doneList[e].id,s=doneList[e].task,i="todoList";checkListLocalStorage(todoList,o,s,i),null!==todoList&&(document.querySelector(".todo__list").innerHTML=""),todoList=JSON.parse(localStorage.getItem("todoList")),displayTodoList(),removeItemLocalStorage(t,doneList,i="doneList","done__list",displayDoneList)}function deleteTask(){let t=document.querySelectorAll(".delete");for(let e=0;e<t.length;e++)t[e].addEventListener("click",()=>{let o=t[e].closest("[data-id]").dataset.id,s="todoList",i="todo__list";removeItemLocalStorage(o,todoList,s,i,displayTodoList),removeItemLocalStorage(o,doneList,s="doneList",i="done__list",displayDoneList)})}function removeItemLocalStorage(t,e,o,s,i){for(let l=0;l<e.length;l++)if(e[l].id===t){let d=e.indexOf(e[l]);e.splice(d,1),localStorage.setItem(`${o}`,JSON.stringify(e)),document.querySelector(`.${s}`).innerHTML="",i()}}function deleteAllDoneTasks(){deleteAllBtn.addEventListener("click",()=>{document.querySelector(".done__list").innerHTML="",doneList.splice(0,doneList.length),localStorage.setItem("doneList",JSON.stringify(doneList))})}null!==(doneList=JSON.parse(localStorage.getItem("doneList")))&&displayDoneList(),taskForm.addEventListener("submit",t=>{t.preventDefault(),createTaskId();let e;checkListLocalStorage(todoList,taskId,taskInput.value,"todoList"),null!==todoList&&(document.querySelector(".todo__list").innerHTML=""),todoList=JSON.parse(localStorage.getItem("todoList")),displayTodoList(),taskForm.reset()}),changeTaskStatus();